var json_data = {
    "name": "Root",
    "children": [
      {
       "name": "Pillar 1",
       "free": true,
       "description": "Interactive authoring tools",
       "children": [
        {
         "name": "Risk SubType 1",
         "description": "Web-based 'cloud' applications for authoring data visualisations",
         "free": true,
         "children": [
          {
           "name": "Risk SubType a",
           "description": "An open-source platform for publishing charts on the web. Cloud-based or self-hosted.",
           "url": "https://datawrapper.de/",
           "free": true
          },
          {
           "name": "Risk SubType b",
           "description": "Spreadsheet in the cloud with charting",
           "free": true
          },
          {
           "name": "Risk SubType c",
           "description": "Cloud-based interactive tool for creating data visualisations",
           "url": "https://plot.ly/",
           "free": true
          },
          {
           "name": "Risk SubType c",
           "description": "Open-source interactive tool for creating and exporting D3-like charts",
           "url": "http://raw.densitydesign.org/",
           "free": true
          }
         ]
        },
        {
         "name": "Risk SubType 2",
         "children": [
          {
           "name": "Risk SubType a",
           "description": "Powerful tool for data analytics and visualisation",
           "url": "http://www.tableausoftware.com/products/desktop"
          },
          {
           "name": "Risk SubType b",
           "description": "Free version of Tableau Desktop where charts are public",
           "url": "http://www.tableausoftware.com/products/public",
           "free": true
          },
          {
            "name": "Risk SubType b",
            "description": "Free version of Tableau Desktop where charts are public",
            "url": "http://www.tableausoftware.com/products/public",
            "free": true
           },
           {
            "name": "Risk SubType b",
            "description": "Free version of Tableau Desktop where charts are public",
            "url": "http://www.tableausoftware.com/products/public",
            "free": true
           },
           {
            "name": "Risk SubType b",
            "description": "Free version of Tableau Desktop where charts are public",
            "url": "http://www.tableausoftware.com/products/public",
            "free": true
           },
           {
            "name": "Risk SubType b",
            "description": "Free version of Tableau Desktop where charts are public",
            "url": "http://www.tableausoftware.com/products/public",
            "free": true
           }
  
         ]
        },
        {
          "name": "Risk SubType 1",
          "description": "Web-based 'cloud' applications for authoring data visualisations",
          "free": true,
          "children": [
           {
            "name": "Risk SubType a",
            "description": "An open-source platform for publishing charts on the web. Cloud-based or self-hosted.",
            "url": "https://datawrapper.de/",
            "free": true
           },
           {
            "name": "Risk SubType b",
            "description": "Spreadsheet in the cloud with charting",
            "free": true
           },
           {
            "name": "Risk SubType c",
            "description": "Cloud-based interactive tool for creating data visualisations",
            "url": "https://plot.ly/",
            "free": true
           },
           {
            "name": "Risk SubType c",
            "description": "Open-source interactive tool for creating and exporting D3-like charts",
            "url": "http://raw.densitydesign.org/",
            "free": true
           }
          ]
         },
         {
          "name": "Risk SubType 1",
          "description": "Web-based 'cloud' applications for authoring data visualisations",
          "free": true,
          "children": [
           {
            "name": "Risk SubType a",
            "description": "An open-source platform for publishing charts on the web. Cloud-based or self-hosted.",
            "url": "https://datawrapper.de/",
            "free": true
           },
           {
            "name": "Risk SubType b",
            "description": "Spreadsheet in the cloud with charting",
            "free": true
           },
           {
            "name": "Risk SubType c",
            "description": "Cloud-based interactive tool for creating data visualisations",
            "url": "https://plot.ly/",
            "free": true
           },
           {
            "name": "Risk SubType c",
            "description": "Open-source interactive tool for creating and exporting D3-like charts",
            "url": "http://raw.densitydesign.org/",
            "free": true
           }
          ]
         },
         {
          "name": "Risk SubType 1",
          "description": "Web-based 'cloud' applications for authoring data visualisations",
          "free": true,
          "children": [
           {
            "name": "Risk SubType a",
            "description": "An open-source platform for publishing charts on the web. Cloud-based or self-hosted.",
            "url": "https://datawrapper.de/",
            "free": true
           },
           {
            "name": "Risk SubType b",
            "description": "Spreadsheet in the cloud with charting",
            "free": true
           },
           {
            "name": "Risk SubType c",
            "description": "Cloud-based interactive tool for creating data visualisations",
            "url": "https://plot.ly/",
            "free": true
           },
           {
            "name": "Risk SubType c",
            "description": "Open-source interactive tool for creating and exporting D3-like charts",
            "url": "http://raw.densitydesign.org/",
            "free": true
           }
          ]
         },
         {
          "name": "Risk SubType 1",
          "description": "Web-based 'cloud' applications for authoring data visualisations",
          "free": true,
          "children": [
           {
            "name": "Risk SubType a",
            "description": "An open-source platform for publishing charts on the web. Cloud-based or self-hosted.",
            "url": "https://datawrapper.de/",
            "free": true
           },
           {
            "name": "Risk SubType b",
            "description": "Spreadsheet in the cloud with charting",
            "free": true
           },
           {
            "name": "Risk SubType c",
            "description": "Cloud-based interactive tool for creating data visualisations",
            "url": "https://plot.ly/",
            "free": true
           },
           {
            "name": "Risk SubType c",
            "description": "Open-source interactive tool for creating and exporting D3-like charts",
            "url": "http://raw.densitydesign.org/",
            "free": true
           }
          ]
         },
         {
          "name": "Risk SubType 1",
          "description": "Web-based 'cloud' applications for authoring data visualisations",
          "free": true,
          "children": [
           {
            "name": "Risk SubType a",
            "description": "An open-source platform for publishing charts on the web. Cloud-based or self-hosted.",
            "url": "https://datawrapper.de/",
            "free": true
           },
           {
            "name": "Risk SubType b",
            "description": "Spreadsheet in the cloud with charting",
            "free": true
           },
           {
            "name": "Risk SubType c",
            "description": "Cloud-based interactive tool for creating data visualisations",
            "url": "https://plot.ly/",
            "free": true
           },
           {
            "name": "Risk SubType c",
            "description": "Open-source interactive tool for creating and exporting D3-like charts",
            "url": "http://raw.densitydesign.org/",
            "free": true
           }
          ]
         },
       ]
      },
      {
       "name": "Pillar 2",
       "description": "Code-based data visualisation creation",
       "free": true,
       "children": [
        {
         "name": "Risk Type 1",
         "description": "The language behind most (all?) browser-based data visualisations",
         "free": true,
         "children": [
          {
           "name": "Risk SubType 1",
           "description": "Off-the-shelf pre-designed charts. Easy to use but less flexible.",
           "free": true,
           "children": [
            {
             "name": "Risk SubType a",
             "description": "A good selection of charts including bar, line, scatter, geo, pie, donut, org etc.",
             "url": "https://developers.google.com/chart/",
             "free": true
            },
            {
             "name": "Risk SubType b",
             "description": "A well maintained commercial library of commonly used chart types",
             "url": "https://www.highcharts.com/"
            },
            {
             "name": "Risk SubType c",
             "description": "A lovely selection of charts including bar, pie, sunburst, icicle, network, trees etc.",
             "url": "https://philogb.github.io/jit/",
             "free": true
            },
            {
             "name": "Risk SubType d",
             "description": "Libraries for visualising geographic data",
             "free": true,
             "children": [
              {
               "name": "Risk SubType e",
               "description": "Lovely vector based mapping library with good browser support",
               "url": "http://kartograph.org/",
               "free": true
              },
              {
               "name": "Risk SubType f",
               "description": "Tile-based mapping library",
               "url": "http://leafletjs.com/",
               "free": true
              }
             ]
            },
            {
             "name": "Risk SubType g",
             "description": "Beautiful line, scatter and histogram charts built on top of D3",
             "url": "http://metricsgraphicsjs.org/",
             "free": true
            },
            {
             "name": "Risk SubType h",
             "description": "A general purpose charting library built on top of D3",
             "url": "http://nvd3.org/",
             "free": true
            },
            {
             "name": "Risk SubType i",
             "description": "Library for visualising networks",
             "url": "http://sigmajs.org/",
             "free": true
            }
           ]
          },
          {
           "name": "Risk SubType 2",
           "description": "For maximum flexibility, custom coding is the way to go. These libraries will lend a hand.",
           "free": true,
           "children": [
            {
             "name": "Risk SubType a",
             "description": "The jewel in the crown of web-based data visualisation. A library packed full of components for building any data visualisation you can imagine.",
             "url": "https://d3js.org/",
             "free": true
            },
            {
             "name": "Risk SubType b",
             "description": "Relatively new, Ractive helps you make your HTML and SVG interactive",
             "url": "http://www.ractivejs.org/",
             "free": true
            },
            {
             "name": "Risk SubType c",
             "description": "A general purpose drawing library with good browser support",
             "url": "http://raphaeljs.com/",
             "free": true
            },
            {
             "name": "Risk SubType d",
             "description": "A modern version of Raphaël that supports modern browsers",
             "url": "http://snapsvg.io/",
             "free": true
            },
            {
             "name": "Risk SubType e",
             "description": "A declarative, mark-up based data visualisation library",
             "url": "https://variancecharts.com/"
            },
            {
             "name": "Risk SubType f",
             "description": "A declarative language for specifying data visualistions",
             "url": "https://trifacta.github.io/vega/",
             "free": true
            }
           ]
          }
         ]
        },
        {
         "name":"Risk SubType 4",
         "description": "Non-JavaScript languages for producing web-based data visualisations",
         "free": true,
         "children": [
          {
           "name": "Risk SubType a",
           "description": "Python's a very popular language in data science and is a pleasant language to learn and use",
           "free": true,
           "children": [
            {
             "name": "Risk SubType b",
             "description": "A powerful tool for producing interactive plots, dashboards and data applications",
             "url": "https://bokeh.pydata.org/",
             "free": true
            }
           ]
          },
          {
           "name": "Risk SubType c",
           "description": "Very popular language for data science",
           "free": true,
           "children": [
            {
             "name": "Risk SubType d",
             "description": "A platform for producing web applications using R",
             "url": "http://shiny.rstudio.com/",
             "free": true
            },
    
           ]
          }
         ]
        }
       ]
      }
    ]
  //   "data":[
  //     {
  //     "id":1663,
  //     "risk_type":"asSuch",
  //     "risk_sub_type":"SubType",
  //     "pillar1_risk":true,
  //     "pillar2_risk":false,
  //     "mandatory":true,
  //     "definition":"definition"
  //     },
  // {"id":1762,"risk_type":"Risk type","risk_sub_type":"sub type","pillar1_risk":false,"pillar2_risk":true,"mandatory":true,"definition":"test"},
  // {"id":1,"risk_type":"Risk type 29","risk_sub_type":"sub type 1","pillar1_risk":true,"pillar2_risk":true,"mandatory":true,"definition":"test"},
  // {"id":2,"risk_type":"Risk type 14","risk_sub_type":"sub type 17","pillar1_risk":false,"pillar2_risk":false,"mandatory":false,"definition":"test"},
  // {"id":3,"risk_type":"Risk type 33","risk_sub_type":"sub type 10","pillar1_risk":true,"pillar2_risk":true,"mandatory":true,"definition":"test"},
  // {"id":4,"risk_type":"Risk type 4","risk_sub_type":"sub type 28","pillar1_risk":true,"pillar2_risk":true,"mandatory":true,"definition":"test"},
  // {"id":5,"risk_type":"Risk type 24","risk_sub_type":"sub type 10","pillar1_risk":true,"pillar2_risk":true,"mandatory":true,"definition":"test"},
  // {"id":6,"risk_type":"Risk type 14","risk_sub_type":"sub type 5","pillar1_risk":false,"pillar2_risk":true,"mandatory":true,"definition":"test"},
  // {"id":7,"risk_type":"Risk type 33","risk_sub_type":"sub type 17","pillar1_risk":true,"pillar2_risk":true,"mandatory":true,"definition":"test"},
  // {"id":8,"risk_type":"Risk type 2","risk_sub_type":"sub type 24","pillar1_risk":true,"pillar2_risk":false,"mandatory":true,"definition":"test"},
  // {"id":9,"risk_type":"Risk type 20","risk_sub_type":"sub type 43","pillar1_risk":false,"pillar2_risk":true,"mandatory":false,"definition":"test"},
  // {"id":10,"risk_type":"Risk type 39","risk_sub_type":"sub type 4","pillar1_risk":true,"pillar2_risk":true,"mandatory":false,"definition":"test"},
  // {"id":11,"risk_type":"Risk type 25","risk_sub_type":"sub type 36","pillar1_risk":true,"pillar2_risk":true,"mandatory":true,"definition":"test"},
  // {"id":12,"risk_type":"Risk type 12","risk_sub_type":"sub type 41","pillar1_risk":true,"pillar2_risk":true,"mandatory":true,"definition":"test"},
  // {"id":13,"risk_type":"Risk type 1","risk_sub_type":"sub type 23","pillar1_risk":true,"pillar2_risk":true,"mandatory":false,"definition":"test"},
  // {"id":14,"risk_type":"Risk type 14","risk_sub_type":"sub type 24","pillar1_risk":false,"pillar2_risk":false,"mandatory":false,"definition":"test"},
  // {"id":15,"risk_type":"Risk type 39","risk_sub_type":"sub type 16","pillar1_risk":true,"pillar2_risk":true,"mandatory":true,"definition":"test"},
  // {"id":16,"risk_type":"Risk type 13","risk_sub_type":"sub type 8","pillar1_risk":false,"pillar2_risk":false,"mandatory":true,"definition":"test"},
  // {"id":17,"risk_type":"Risk type 4","risk_sub_type":"sub type 43","pillar1_risk":true,"pillar2_risk":true,"mandatory":false,"definition":"test"},
  // {"id":18,"risk_type":"Risk type 3","risk_sub_type":"sub type 45","pillar1_risk":true,"pillar2_risk":false,"mandatory":true,"definition":"test"},
  // {"id":19,"risk_type":"Risk type 26","risk_sub_type":"sub type 24","pillar1_risk":true,"pillar2_risk":false,"mandatory":false,"definition":"test"},
  // {"id":20,"risk_type":"Risk type 31","risk_sub_type":"sub type 44","pillar1_risk":true,"pillar2_risk":true,"mandatory":false,"definition":"test"},
  // {"id":21,"risk_type":"Risk type 14","risk_sub_type":"sub type 7","pillar1_risk":false,"pillar2_risk":true,"mandatory":false,"definition":"test"},
  // {"id":22,"risk_type":"Risk type 29","risk_sub_type":"sub type 9","pillar1_risk":true,"pillar2_risk":false,"mandatory":true,"definition":"test"},
  // {"id":23,"risk_type":"Risk type 10","risk_sub_type":"sub type 9","pillar1_risk":true,"pillar2_risk":false,"mandatory":false,"definition":"test"},
  // {"id":24,"risk_type":"Risk type 25","risk_sub_type":"sub type 39","pillar1_risk":true,"pillar2_risk":false,"mandatory":true,"definition":"test"},
  // {"id":25,"risk_type":"Risk type 48","risk_sub_type":"sub type 9","pillar1_risk":false,"pillar2_risk":false,"mandatory":false,"definition":"test"},
  // {"id":26,"risk_type":"Risk type 7","risk_sub_type":"sub type 25","pillar1_risk":false,"pillar2_risk":true,"mandatory":true,"definition":"test"},
  // {"id":27,"risk_type":"Risk type 7","risk_sub_type":"sub type 22","pillar1_risk":true,"pillar2_risk":false,"mandatory":true,"definition":"test"},
  // {"id":28,"risk_type":"Risk type 13","risk_sub_type":"sub type 25","pillar1_risk":true,"pillar2_risk":true,"mandatory":false,"definition":"test"},
  // {"id":29,"risk_type":"Risk type 6","risk_sub_type":"sub type 7","pillar1_risk":false,"pillar2_risk":true,"mandatory":true,"definition":"test"},
  // {"id":30,"risk_type":"Risk type 40","risk_sub_type":"sub type 49","pillar1_risk":false,"pillar2_risk":true,"mandatory":true,"definition":"test"},
  // {"id":31,"risk_type":"Risk type 7","risk_sub_type":"sub type 7","pillar1_risk":false,"pillar2_risk":false,"mandatory":true,"definition":"test"},
  // {"id":32,"risk_type":"Risk type 27","risk_sub_type":"sub type 11","pillar1_risk":false,"pillar2_risk":true,"mandatory":false,"definition":"test"},
  // {"id":33,"risk_type":"Risk type 3","risk_sub_type":"sub type 46","pillar1_risk":false,"pillar2_risk":true,"mandatory":true,"definition":"test"},
  // {"id":34,"risk_type":"Risk type 7","risk_sub_type":"sub type 24","pillar1_risk":false,"pillar2_risk":true,"mandatory":true,"definition":"test"},
  // {"id":35,"risk_type":"Risk type 3","risk_sub_type":"sub type 34","pillar1_risk":true,"pillar2_risk":true,"mandatory":false,"definition":"test"},
  // {"id":36,"risk_type":"Risk type 11","risk_sub_type":"sub type 23","pillar1_risk":false,"pillar2_risk":true,"mandatory":true,"definition":"test"},
  // {"id":37,"risk_type":"Risk type 28","risk_sub_type":"sub type 24","pillar1_risk":true,"pillar2_risk":false,"mandatory":true,"definition":"test"},
  // {"id":38,"risk_type":"Risk type 24","risk_sub_type":"sub type 23","pillar1_risk":false,"pillar2_risk":false,"mandatory":false,"definition":"test"},
  // {"id":39,"risk_type":"Risk type 19","risk_sub_type":"sub type 30","pillar1_risk":true,"pillar2_risk":true,"mandatory":true,"definition":"test"},
  // {"id":40,"risk_type":"Risk type 28","risk_sub_type":"sub type 24","pillar1_risk":true,"pillar2_risk":false,"mandatory":false,"definition":"test"},
  // {"id":41,"risk_type":"Risk type 28","risk_sub_type":"sub type 3","pillar1_risk":true,"pillar2_risk":false,"mandatory":false,"definition":"test"},
  // {"id":42,"risk_type":"Risk type 43","risk_sub_type":"sub type 13","pillar1_risk":false,"pillar2_risk":false,"mandatory":false,"definition":"test"},
  // {"id":43,"risk_type":"Risk type 33","risk_sub_type":"sub type 35","pillar1_risk":false,"pillar2_risk":true,"mandatory":false,"definition":"test"},
  // {"id":44,"risk_type":"Risk type 42","risk_sub_type":"sub type 49","pillar1_risk":false,"pillar2_risk":false,"mandatory":true,"definition":"test"},
  // {"id":45,"risk_type":"Risk type 40","risk_sub_type":"sub type 30","pillar1_risk":false,"pillar2_risk":false,"mandatory":false,"definition":"test"},
  // {"id":46,"risk_type":"Risk type 23","risk_sub_type":"sub type 38","pillar1_risk":true,"pillar2_risk":true,"mandatory":true,"definition":"test"},
  // {"id":47,"risk_type":"Risk type 12","risk_sub_type":"sub type 6","pillar1_risk":true,"pillar2_risk":false,"mandatory":true,"definition":"test"},
  // {"id":48,"risk_type":"Risk type 33","risk_sub_type":"sub type 37","pillar1_risk":true,"pillar2_risk":false,"mandatory":true,"definition":"test"},
  // {"id":4,"risk_type":"Risk type 23","risk_sub_type":"sub type 14","pillar1_risk":false,"pillar2_risk":false,"mandatory":false,"definition":"test"},
  // {"id":5,"risk_type":"Risk type 14","risk_sub_type":"sub type 37","pillar1_risk":true,"pillar2_risk":false,"mandatory":false,"definition":"test"},
  // {"id":5,"risk_type":"Risk type 7","risk_sub_type":"sub type 10","pillar1_risk":true,"pillar2_risk":true,"mandatory":false,"definition":"test"},
  // {"id":5,"risk_type":"Risk type 18","risk_sub_type":"sub type 48","pillar1_risk":true,"pillar2_risk":true,"mandatory":true,"definition":"test"}],
  
   }
   
   var m = [20, 120, 20, 20],
       w = 1280 - m[1] - m[3],
       h = 800 - m[0] - m[2],
       i = 0,
       root;
   
   var tree = d3.layout.tree()
       .size([h, w]);
   
   var diagonal = d3.svg.diagonal()
       .projection(function(d) { return [d.y, d.x]; });
   
   var vis = d3.select("#body").append("svg:svg")
       .attr("width", w + m[1] + m[3])
       .attr("height", h + m[0] + m[2])
     .append("svg:g")
       .attr("transform", "translate(" + m[3] + "," + m[0] + ")");
   
   root = json_data;
   root.x0 = h / 2;
   root.y0 = 0;
   
   function toggleAll(d) {
     if (d.children) {
       d.children.forEach(toggleAll);
       toggle(d);
     }
   }
   
     // Initialize the display to show a few nodes.
     // root.children.forEach(toggleAll);
     // toggle(root.children[1]);
     // toggle(root.children[1].children[2]);
     // toggle(root.children[9]);
     // toggle(root.children[9].children[0]);
   
    update(root);
   
   
   function update(source) {
     var duration = d3.event && d3.event.altKey ? 5000 : 500;
   
     // Compute the new tree layout.
     var nodes = tree.nodes(root).reverse();
   
     // Normalize for fixed-depth.
     nodes.forEach(function(d) { d.y = d.depth * 180; });
   
     // Update the nodes…
     var node = vis.selectAll("g.node")
         .data(nodes, function(d) { return d.id || (d.id = ++i); });
   
     // Enter any new nodes at the parent's previous position.
     var nodeEnter = node.enter().append("svg:g")
         .attr("class", "node")
         .attr("transform", function(d) { return "translate(" + source.y0 + "," + source.x0 + ")"; })
         .on("click", function(d) { toggle(d); update(d); });
   
     nodeEnter.append("svg:circle")
         .attr("r", 1e-6)
         .style("fill", function(d) { return d._children ? "#0020600" : "#fff"; });
   
     nodeEnter.append('a')
         .attr('xlink:href', function(d) {
           return d.url;
         })
         .append("svg:text")
         .attr("x", function(d) { return d.children || d._children ? -10 : 10; })
         .attr("dy", ".35em")
         .attr("text-anchor", function(d) { return d.children || d._children ? "end" : "start"; })
         .text(function(d) { return d.name; })
         .style('fill', function(d) {
           return d.free ? '#483698' : '#002060';
         })
         .style("fill-opacity", 1e-6);
   
     nodeEnter.append("svg:title")
       .text(function(d) {
         return d.description;
       });
   
     // Transition nodes to their new position.
     var nodeUpdate = node.transition()
         .duration(duration)
         .attr("transform", function(d) { return "translate(" + d.y + "," + d.x + ")"; });
   
     nodeUpdate.select("circle")
         .attr("r", 6)
         .style("fill", function(d) { return d._children ? "#002060" : "#fff"; });
   
     nodeUpdate.select("text")
         .style("fill-opacity", 1);
   
     // Transition exiting nodes to the parent's new position.
     var nodeExit = node.exit().transition()
         .duration(duration)
         .attr("transform", function(d) { return "translate(" + source.y + "," + source.x + ")"; })
         .remove();
   
     nodeExit.select("circle")
         .attr("r", 1e-6);
   
     nodeExit.select("text")
         .style("fill-opacity", 1e-6);
   
     // Update the links…
     var link = vis.selectAll("path.link")
         .data(tree.links(nodes), function(d) { return d.target.id; });
   
     // Enter any new links at the parent's previous position.
     link.enter().insert("svg:path", "g")
         .attr("class", "link")
         .attr("d", function(d) {
           var o = {x: source.x0, y: source.y0};
           return diagonal({source: o, target: o});
         })
       .transition()
         .duration(duration)
         .attr("d", diagonal);
   
     // Transition links to their new position.
     link.transition()
         .duration(duration)
         .attr("d", diagonal);
   
     // Transition exiting nodes to the parent's new position.
     link.exit().transition()
         .duration(duration)
         .attr("d", function(d) {
           var o = {x: source.x, y: source.y};
           return diagonal({source: o, target: o});
         })
         .remove();
   
     // Stash the old positions for transition.
     nodes.forEach(function(d) {
       d.x0 = d.x;
       d.y0 = d.y;
     });
   }
   
   // Toggle children.
   function toggle(d) {
     if (d.children) {
       d._children = d.children;
       d.children = null;
     } else {
       d.children = d._children;
       d._children = null;
     }
   }